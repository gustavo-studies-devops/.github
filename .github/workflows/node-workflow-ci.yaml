name: Node workflow CI
description: This workflow is used to a Node.js projects

on:
  workflow_call:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
        - name: Checkout branch 
          uses: actions/checkout@v4
        
        - name: Setup node in the host
          uses: actions/setup-node@v4
          with:
           node-version: 22.x

        - name: Install application dependecies
          run: cd src/ && npm install
          shell: bash

        - name: Running the application tests 
          uses: gustavo-studies-devops/github-pipeline/.github/actions/tests@develop
  build:
    runs-on: ubuntu-latest
    needs: test

    steps:
      - uses: actions/checkout@v4

      - name: Run a one-line script
        run: echo Hello from gustavo-studies organization
